FROM alpine
EXPOSE 53/udp
RUN echo '@edge http://dl-cdn.alpinelinux.org/alpine/edge/main' >> /etc/apk/repositories
RUN apk add --no-cache \
	nodejs \
	nodejs-npm \
	&& npm cache clean --force \
	&& npm remove npm --global
RUN apk add --no-cache \
	bind \
	bind-tools \
	&& chown -R root:root /var
ADD ["./layout.tar.gz", "/"]
RUN chown -R root:root /var/bind
ENTRYPOINT ["/root/entrypoint.sh"]
